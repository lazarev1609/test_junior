# API documentation:

## Users

#### GET `/users` **Получить информацию о всех пользователях** </br>
Возвращает всех пользователей. Ответ вида:
```json
[
    {
        "id": 2,
        "name": "Pavel",
        "abonement": null,
        "books": []
    },
    {
        "id": 3,
        "name": "Yaromir",
        "abonement": null,
        "books": []
    }
]
```
____
#### GET `/users:id` **Получить информацию о пользователе** </br>
Возвращает информацию об одном пользователе со списком книг на руках. Ответ вида:
```json
{
    "id": 3,
    "name": "Yaromir",
    "abonement": null,
    "books": [
        {
            "id": 1,
            "title": "Programming on C++"
        },
        {
            "id": 2,
            "title": "English"
        },
        {
            "id": 3,
            "title": "Math"
        }
    ]
}
```
____
#### Post `/users` **Добавление нового пользователя** </br>
+ **Входные данные:** принимает информацию о пользователе:
```json
{
  "name": "Egor"
}
```
+ **Возвращаемое значение:** возвращает объект типа `user` с данными нового пользователя:
```json
{
    "name": "Egor",
    "id": 8,
    "abonement": null
}
```
____
#### Delete `/users:id` **Удаление пользователя** </br>
Принимает параметр `id` пользователя, которого хотим удалить.</br>
Возвращает сатус-код запроса: 
+ В случае **успеха**: `200` 
+ В случае **ошибки с удалением из БД**: `500`
+ В случае, **если такого пользователя нет**: `400`
____
#### Put `/users:id` **Выдача абонемента пользователю** </br>
Принимает параметр `id` пользователя, которому хотим выдать абонемент.</br>
Возвращает сатус-код запроса: 
+ В случае **успеха**: `200`
+ В случае, **если у пользователя уже есть абонемент**: `400`
____
#### Post `/users:id` **Обновление данных пользователя** </br>
Принимает параметр `id` пользователя, чьи данные хотим обновить.</br>
Возвращает сатус-код запроса: 
+ В случае **успеха**: `200` 
+ В случае **ошибки с обновлением БД**: `500`
____

</br>
</br>

## Books

#### Post `/books` **Добавление книги** 
+ **Входные данные:** принимает информацию о книге:
```json
{
  "title": "Math"
}
```
+ **Возвращаемое значение:** возвращает объект типа `Book` с данными новой книги:
```json
{
  "id": "1",
  "name": "Война и мир",
  "author": "Толстой Л.Н.",
}
```
+ В случае **если кннига уже существует**: `400`<\br>
____

</br>
</br>

#### Post `/addBook` **Пользователь берет книгу** </br>
**Входные данные:** принимает `id` пользователя и `title` книги:
```json
{
  "title": "Math",
  "user_id": "2"
}
```
**Возвращает сатус-код** запроса: 
+ В случае **успеха**: `200`
+ В случаях, если: **у пользователя нет абонемента**, **у пользователя 5 книг** или **книга занята другим пользователем**: `400`
____

#### Post `/returnBook` **Пользователь возвращает книгу** </br>
**Входные данные:** принимает `id` пользователя и `title` книги:
```json
{
  "title": "Math",
  "user_id": "2"
}
```
**Возвращает сатус-код** запроса: 
+ В случае **успеха**: `200` 
+ В случаях, если **Пользователь не имеет такой книги**: `400`

